<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="The intricacies of a laravel project setup with sail under WSL2" /><meta name="author" content="Mate Hajnal" /><meta property="og:locale" content="en" /><meta name="description" content="I needed to create a laravel blog motor for one of my interviews in the past 2 weeks, and even to just get started I bumped into some problems. To be a little bit more specific, the problem was that the WSL2 DNS settings are really vaguely implemented, and I am quite surprised that I didn’t find more complaint about it. Basically 2-3 issues and posts which I was able to find. So if you managed to get here due to the same errors I got, this post will help." /><meta property="og:description" content="I needed to create a laravel blog motor for one of my interviews in the past 2 weeks, and even to just get started I bumped into some problems. To be a little bit more specific, the problem was that the WSL2 DNS settings are really vaguely implemented, and I am quite surprised that I didn’t find more complaint about it. Basically 2-3 issues and posts which I was able to find. So if you managed to get here due to the same errors I got, this post will help." /><link rel="canonical" href="https://hajnalmt.hu/posts/laravel-sail-setup-intricacies/" /><meta property="og:url" content="https://hajnalmt.hu/posts/laravel-sail-setup-intricacies/" /><meta property="og:site_name" content="Hajnal Máté" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-30T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="The intricacies of a laravel project setup with sail under WSL2" /><meta name="twitter:site" content="@hajnalmt" /><meta name="twitter:creator" content="@Mate Hajnal" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Mate Hajnal"},"dateModified":"2022-03-30T18:14:08+02:00","datePublished":"2022-03-30T00:00:00+02:00","description":"I needed to create a laravel blog motor for one of my interviews in the past 2 weeks, and even to just get started I bumped into some problems. To be a little bit more specific, the problem was that the WSL2 DNS settings are really vaguely implemented, and I am quite surprised that I didn’t find more complaint about it. Basically 2-3 issues and posts which I was able to find. So if you managed to get here due to the same errors I got, this post will help.","headline":"The intricacies of a laravel project setup with sail under WSL2","mainEntityOfPage":{"@type":"WebPage","@id":"https://hajnalmt.hu/posts/laravel-sail-setup-intricacies/"},"url":"https://hajnalmt.hu/posts/laravel-sail-setup-intricacies/"}</script><title>The intricacies of a laravel project setup with sail under WSL2 | Hajnal Máté</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Hajnal Máté"><meta name="application-name" content="Hajnal Máté"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/hajnalmt/hajnalmt-blog/master/assets/profile_picture_cropped.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Hajnal Máté</a></div><div class="site-subtitle font-italic">Just an engineer who likes coding, economics and political discussions.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about-me/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://gitlab.com/hajnalmt" aria-label="gitlab" target="_blank" rel="noopener noreferrer"> <i class="fab fa-gitlab"></i> </a> <a href="https://github.com/hajnalmt" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/hajnalmt" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['hajnalmt','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>The intricacies of a laravel project setup with sail under WSL2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>The intricacies of a laravel project setup with sail under WSL2</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1648591200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 30, 2022 </em> </span> <span> Updated <em class="" data-ts="1648656848" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 30, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em>, <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1260 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><p>I needed to create a laravel blog motor for one of my interviews in the past 2 weeks, and even to just get started I bumped into some problems. To be a little bit more specific, the problem was that the WSL2 DNS settings are really vaguely implemented, and I am quite surprised that I didn’t find more complaint about it. Basically 2-3 issues and posts which I was able to find. So if you managed to get here due to the same errors I got, this post will help.</p><h3 id="the-command-which-shall-work"><span class="mr-2">The command which shall work</span><a href="#the-command-which-shall-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To get started with a laravel project even the new <a href="https://laravel.com/docs/9.x/installation#getting-started-on-windows">Laravel 9 documentation</a> says that use sail under WSL2 to get started, and this is big a relief for me, that even the laravel community jumped into the microservice architecture-based development. No more XAMPP and php version management, thank god times are changing.</p><p>So the official <a href="https://laravel.com/docs/9.x/installation#getting-started-on-windows">Laravel 9 docs</a> suggests to install WSL2 and Docker Desktop. To be fair I had a WSL2 Ubuntu 20.04 LTS with a docker-ce and docker-cli installed already and due to the last year’s <a href="https://www.docker.com/blog/updating-product-subscriptions/">licensing misery</a> of the Docker Desktop I try to stay away from it.</p><p>This means that according to the docs, one curl command and I shall be ready to go:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-s</span> <span class="s2">"https://laravel.build/little-laravel-blog/?with=pgsql,selenium"</span> | bash
</pre></table></code></div></div><p>With the project name little-laravel-blog, I went with the postgres and selenium based service setup, because for a blog motor I won’t need anything more. The CLI output was the following:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre> _                               _
| |                             | |
| |     __ _ _ __ __ ___   _____| |
| |    / _<span class="sb">`</span> | <span class="s1">'__/ _` \ \ / / _ \ |
| |___| (_| | | | (_| |\ V /  __/ |
|______\__,_|_|  \__,_| \_/ \___|_|

Warning: TTY mode requires /dev/tty to be read/writable.
    Creating a "laravel/laravel" project at "./example-app"
    https://repo.packagist.org could not be fully loaded (curl error 6 while downloading https://repo.packagist.org/packages.json: Could not resolve host: repo.packagist.org), package information was loaded from the local cache and may be out of date
    The following exception probably indicates you have misconfigured DNS resolver(s)


  [Composer\Downloader\TransportException]
      curl error 6 while downloading https://repo.packagist.org/p2/laravel/laravel.json: Could not resolve host: repo.packagist.org


    create-project [-s|--stability STABILITY] [--prefer-source] [--prefer-dist] [--prefer-install PREFER-INSTALL] [--repository REPOSITORY] [--repository-url REPOSITORY-URL] [--add-repository] [--dev] [--no-dev] [--no-custom-installers] [--no-scripts] [--no-progress] [--no-secure-http] [--keep-vcs] [--remove-vcs] [--no-install] [--ignore-platform-req IGNORE-PLATFORM-REQ] [--ignore-platform-reqs] [--ask] [--] [&lt;package&gt;] [&lt;directory&gt;] [&lt;version&gt;]

bash: line 16: cd: example-app: No such file or directory
</span></pre></table></code></div></div><p>No directory created so what happened?</p><h3 id="the-dns-resolver-error"><span class="mr-2">The DNS resolver error</span><a href="#the-dns-resolver-error" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The output suggests that the problem is probably with my dns setup. When I checked what are the commands I try to run exactly and entered the <a href="https://laravel.build/little-laravel-blog/?with=pgsql,selenium">curled url</a> in a browser, it came out that it just runs <code>laravelsail/php81-composer:latest</code> container with an artisan command.</p><p>So I thought that maybe I will try to run the command myself and reproduce the issue, and I managed to do it.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>docker run <span class="nt">-dti</span> <span class="nt">-v</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span><span class="s2">"</span>:/opt <span class="nt">--name</span> sail-container <span class="nt">-w</span> /opt laravelsail/php81-composer:latest

root@7650f724374c:/opt# laravel new little-laravel-blog

 _                               _
| |                             | |
| |     __ _ _ __ __ ___   _____| |
| |    / _<span class="sb">`</span> | <span class="s1">'__/ _` \ \ / / _ \ |
| |___| (_| | | | (_| |\ V /  __/ |
|______\__,_|_|  \__,_| \_/ \___|_|

Creating a "laravel/laravel" project at "./little-laravel-blog"
https://repo.packagist.org could not be fully loaded (curl error 6 while downloading https://repo.packagist.org/packages.json: Could not resolve host: repo.packagist.org), package information was loaded from the local cache and may be out of date
The following exception probably indicates you have misconfigured DNS resolver(s)


  [Composer\Downloader\TransportException]
  curl error 6 while downloading https://repo.packagist.org/p2/laravel/laravel.json: Could not resolve host: repo.pac
  kagist.org


create-project [-s|--stability STABILITY] [--prefer-source] [--prefer-dist] [--prefer-install PREFER-INSTALL] [--repository REPOSITORY] [--repository-url REPOSITORY-URL] [--add-repository] [--dev] [--no-dev] [--no-custom-installers] [--no-scripts] [--no-progress] [--no-secure-http] [--keep-vcs] [--remove-vcs] [--no-install] [--ignore-platform-req IGNORE-PLATFORM-REQ] [--ignore-platform-reqs] [--ask] [--] [&lt;package&gt;] [&lt;directory&gt;] [&lt;version&gt;]
</span></pre></table></code></div></div><p>So in the meantime I checked the dns settings of the container:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>root@7650f724374c:/opt# <span class="nb">cat</span> /etc/resolv.conf
<span class="c"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>
<span class="c"># [network]</span>
<span class="c"># generateResolvConf = false</span>
nameserver 172.17.160.1
root@7650f724374c:/opt# <span class="nb">exit</span>
</pre></table></code></div></div><p>Which does not seemed right, this IP address seemed weird, and it came out that the container is initialized with the WSL’s dns servers, and indeed, this was the dns configuration of my Ubuntu 20.04, so how to change it? After some digging into the <a href="https://docs.docker.com/config/containers/container-networking/">docker networking documentation</a> I started the container again with the 8.8.8.8 dns flag:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">-dti</span> <span class="nt">-v</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span><span class="s2">"</span>:/opt <span class="nt">--name</span> sail-container <span class="nt">--dns</span> 8.8.8.8 <span class="nt">-w</span> /opt laravelsail/php81-composer:latest
</pre></table></code></div></div><p>And voilá, everything went fine now.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre>Sun Mar 20 12:53:58 0 hajnalmt@DESKTOP-N55OACK:~/own
docker <span class="nb">exec</span>  <span class="nt">-it</span> sail-container /bin/bash
root@6c5393281f67:/opt# <span class="nb">cat</span> /etc/resolv.conf
nameserver 8.8.8.8
root@6c5393281f67:/opt# <span class="nb">ls
</span>hajnalmt-blog  hajnalmt-hosting  o1g.ci
root@6c5393281f67:/opt# <span class="nb">cat</span> /etc/resolv.conf ^C
root@6c5393281f67:/opt# laravel new little-laravel-blog

 _                               _
| |                             | |
| |     __ _ _ __ __ ___   _____| |
| |    / _<span class="sb">`</span> | <span class="s1">'__/ _` \ \ / / _ \ |
| |___| (_| | | | (_| |\ V /  __/ |
|______\__,_|_|  \__,_| \_/ \___|_|

Creating a "laravel/laravel" project at "./little-laravel-blog"
Info from https://repo.packagist.org: #StandWithUkraine
Installing laravel/laravel (v9.1.2)
  - Downloading laravel/laravel (v9.1.2)
  - Installing laravel/laravel (v9.1.2): Extracting archive
Created project in /opt/little-laravel-blog
&gt; @php -r "file_exists('</span>.env<span class="s1">') || copy('</span>.env.example<span class="s1">', '</span>.env<span class="s1">');"
Loading composer repositories with package information
Info from https://repo.packagist.org: #StandWithUkraine
Updating dependencies
Lock file operations: 108 installs, 0 updates, 0 removals
  - Locking brick/math (0.9.3)
  - Locking dflydev/dot-access-data (v3.0.1)
  - Locking doctrine/inflector (2.0.4)
  - Locking doctrine/instantiator (1.4.1)
  - Locking doctrine/lexer (1.2.3)
  - Locking dragonmantank/cron-expression (v3.3.1)
...
Use the `composer fund` command to find out more!
&gt; @php artisan vendor:publish --tag=laravel-assets --ansi --force
No publishable resources for tag [laravel-assets].
Publishing complete.
&gt; @php artisan key:generate --ansi
Application key set successfully.

Application ready! Build something amazing.
</span></pre></table></code></div></div><h3 id="editing-the-compose-file-too"><span class="mr-2">Editing the compose file too</span><a href="#editing-the-compose-file-too" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Despite solving this issue, the problem still came up when I tried the <code>sail up</code> command. My first attempt was to edit my wsl2 dns configuration (which is the main reason this whole laravel setup just doesn’t work at a glance), but after several try, I just gave up. I have tried every method, the <a href="https://superuser.com/questions/1533291/how-do-i-change-the-dns-settings-for-wsl2">internet suggested</a>. I even crashed wsl with one of my attempts, but I couldn’t overcome the issue that the dns configuration gets generated on every new restart, so either your configuration will be lost after restarting the terminal, or there is a possibility, that you will mess up your wsl2 dns configuration, which is not fun.</p><p>The permanent solution is just to edit your docker-compose.yml file to use the google dns.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c1"># For more information: https://laravel.com/docs/sail</span>
<span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">laravel.test</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./vendor/laravel/sail/runtimes/8.1</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile</span>
      <span class="na">args</span><span class="pi">:</span>
        <span class="na">WWWGROUP</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${WWWGROUP}"</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">sail-8.1/app</span>
    <span class="na">extra_hosts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">host.docker.internal:host-gateway"</span>
    <span class="na">dns</span><span class="pi">:</span> <span class="s">8.8.8.8</span> <span class="c1"># I ADDED THIS LINE</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">${APP_PORT:-80}:80"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">WWWUSER</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${WWWUSER}"</span>
      <span class="na">LARAVEL_SAIL</span><span class="pi">:</span> <span class="m">1</span>
      <span class="na">XDEBUG_MODE</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SAIL_XDEBUG_MODE:-off}"</span>
      <span class="na">XDEBUG_CONFIG</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SAIL_XDEBUG_CONFIG:-client_host=host.docker.internal}"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">.:/var/www/html"</span>
  <span class="c1"># ...</span>
</pre></table></code></div></div><p>I basically added a dns entry to the laravel test service.</p><p>I hope the post helped you, if you bumped into this same issue.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/laravel/'>Laravel</a>, <a href='/categories/sail/'>Sail</a>, <a href='/categories/wsl2/'>WSL2</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/laravel/" class="post-tag no-text-decoration" >laravel</a> <a href="/tags/sail/" class="post-tag no-text-decoration" >sail</a> <a href="/tags/wsl2/" class="post-tag no-text-decoration" >wsl2</a> <a href="/tags/dnsproblem/" class="post-tag no-text-decoration" >dnsproblem</a> <a href="/tags/dns/" class="post-tag no-text-decoration" >dns</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=The%20intricacies%20of%20a%20laravel%20project%20setup%20with%20sail%20under%20WSL2%20-%20Hajnal%20M%C3%A1t%C3%A9&url=https%3A%2F%2Fhajnalmt.hu%2Fposts%2Flaravel-sail-setup-intricacies%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=The%20intricacies%20of%20a%20laravel%20project%20setup%20with%20sail%20under%20WSL2%20-%20Hajnal%20M%C3%A1t%C3%A9&u=https%3A%2F%2Fhajnalmt.hu%2Fposts%2Flaravel-sail-setup-intricacies%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fhajnalmt.hu%2Fposts%2Flaravel-sail-setup-intricacies%2F&text=The%20intricacies%20of%20a%20laravel%20project%20setup%20with%20sail%20under%20WSL2%20-%20Hajnal%20M%C3%A1t%C3%A9" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/laravel-sail-setup-intricacies/">The intricacies of a laravel project setup with sail under WSL2</a><li><a href="/posts/how-to-write-a-modern-classic.cv/">How to write a cv in latex with moderncv template</a><li><a href="/posts/kubernetes-sendgrid-service/">NIGNX proxy in Kubernetes for Sendgrid SSL click Tracking</a><li><a href="/posts/about-my-blog/">Starting at somewhere</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/clicktracking/">clicktracking</a> <a class="post-tag" href="/tags/cv/">cv</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/dnsproblem/">dnsproblem</a> <a class="post-tag" href="/tags/gitlabicon/">gitlabicon</a> <a class="post-tag" href="/tags/ingress/">ingress</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/laravel/">laravel</a> <a class="post-tag" href="/tags/latex/">latex</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/kubernetes-sendgrid-service/"><div class="card-body"> <em class="small" data-ts="1647298800" data-df="ll" > Mar 15, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>NIGNX proxy in Kubernetes for Sendgrid SSL click Tracking</h3><div class="text-muted small"><p> Before I get into the article I want to thank tg44 (Gergő Törcsvári) who created the final configuration, check his blog too if you have some time. Sendgrid is an e-mail delivery service which my ...</p></div></div></a></div><div class="card"> <a href="/posts/how-to-write-a-modern-classic.cv/"><div class="card-body"> <em class="small" data-ts="1647039600" data-df="ll" > Mar 12, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to write a cv in latex with moderncv template</h3><div class="text-muted small"><p> TLDR: Here is my new CV written in latex: English CV Hungarian CV The source code link on Overleaf: Hajnal Mate CV. Intro Today I stumbled upon the task to refresh my CV and I decided tha...</p></div></div></a></div><div class="card"> <a href="/posts/about-my-blog/"><div class="card-body"> <em class="small" data-ts="1645570800" data-df="ll" > Feb 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Starting at somewhere</h3><div class="text-muted small"><p> By the time most of the developers feel like, that it would be really cool, to share their thoughts online about the stuff they deal with every day. This happened to be the case with me too, so I s...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kubernetes-sendgrid-service/" class="btn btn-outline-primary" prompt="Older"><p>NIGNX proxy in Kubernetes for Sendgrid SSL click Tracking</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/clicktracking/">clicktracking</a> <a class="post-tag" href="/tags/cv/">cv</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/dnsproblem/">dnsproblem</a> <a class="post-tag" href="/tags/gitlabicon/">gitlabicon</a> <a class="post-tag" href="/tags/ingress/">ingress</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/laravel/">laravel</a> <a class="post-tag" href="/tags/latex/">latex</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/hajnalmt">Hajnal Máté</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GNGCDNSM4P"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GNGCDNSM4P'); }); </script>
